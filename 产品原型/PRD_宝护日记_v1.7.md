# 宝护日记 V1.7 需求文档（基于产品原型逐项细化）

- 文档版本：v1.0
- 更新日期：2025-11-29
- 适用范围：移动端 Web 原型（Tailwind + Material Symbols），中文简体。

## 产品定位与核心目标
- 面向育儿家庭的喂养记录与统计应用，支持配方奶、母乳、辅食记录，双胎模式，家庭协作与提醒。
- 提供简单、快速的记录体验与清晰的数据统计视图；支持统一与分宝宝提醒策略。

## 设计与规范（从原型抽取）
- 主题色：`#2b8cee`（primary）。来源：喂养记录与设置等页面 Tailwind 配置。
- 全局背景：`background-light #f6f7f8`；暗色：`background-dark #101922`。
- 字体：`Lexend` 为 display 字体（多页面均引用）。
- 图标集：Material Symbols Outlined（页面大量使用，如 home、bar_chart、person、breastfeeding、water_bottle、restaurant、schedule、timer 等）。
- 暗色模式：均配置 `darkMode: "class"`，页面组件提供暗色变体。

## 信息架构与导航
- 底部导航三栏：`主页`、`统计`、`我的`。
  - 主页：`喂养记录主页_4/code.html:179–193`
  - 统计：`数据统计页/code.html:174–187`
  - 我的：`设置页面_3/code.html:136–151`
- 浮动新增按钮：主页底部居中悬浮“添加”（图标按钮）。`喂养记录主页_4/code.html:174–178`
- 顶部标题/操作：各页面 AppBar 居中标题 + 左侧返回/右侧设置或保存。

## 用户与角色
- 个人用户：维护账号与宝宝档案。
- 家庭成员：角色区分为`管理员`与`家庭成员`，示例为“爸爸(我)/妈妈/奶奶”。`家庭模式设置/code.html:58–60, 72–74, 86–88`
- 双胎模式：通过设置开启；多个页面提供宝宝 A/B 分段选择。

## 数据模型（建议）
- 宝宝档案：`baby_id`、`姓名`、`性别{男|女}`、`出生日期`、`头像`、`排序`。
- 喂养记录：`record_id`、`baby_id`、`类型{母乳|配方奶|辅食}`、`时间`、`量{ml|斤|g}`、`时长{秒}`、`侧别{左|右|无}`、`记录人`、`备注(可选)`。
- 提醒配置：`scope{统一|A|B}`、`开启状态`、`间隔{小时,分钟}`、`方式{震动|铃声|两者}`、`铃声`。
- 统计：`聚合维度{日|周}`、`总量/频率/趋势`、`换算参数（母乳折算为奶粉平均值）`。

## 页面与流程（逐项文案与位置）

### 登录/注册（/登录/注册页/code.html）
- 标题：`宝贝日记` — 居中主标题。位置：62–63。
- 分段切换：`登录`（默认）、`注册`。位置：64–73（默认选中：67–69）。
- 表单标签：`账号` — 输入框上方。位置：77–80。
- 账号占位：`请输入您的账号` — 位置：79。
- 表单标签：`密码` — 输入框上方。位置：81–84。
- 密码占位：`请输入密码` — 位置：84–85。
- 密码显隐：右侧图标按钮（无文案）。位置：85–88。
- 辅助链接：`忘记密码?` — 位置：91–93。
- 主按钮：`登录` — 位置：95–96。

### 主页（喂养记录主页_4/code.html）
- 顶部右侧：设置图标按钮（无文案）。位置：94–99。
- 区块标题：`今日统计` — 位置：102。
- 统计卡标签：`今日喂养` — 位置：106。
- 汇总文案：`奶粉 360ml + 母乳 2次 + 辅食 30g` — 位置：107。
- 指标标签/值：`喂养次数` / `5 次` — 位置：111–113。
- 指标标签/值：`上次喂养` / `2小时前` — 位置：115–117。
- 区块标题：`最近记录` — 位置：121。
- 列表项1：标题`瓶喂`、副文案`今天 14:30 · 妈妈`、值`120 ml` — 位置：128–133。
- 列表项2：标题`母乳`、副文案`今天 11:15 · 妈妈`、值`15 min`、侧别`左` — 位置：140–146。
- 列表项3：标题`瓶喂`、副文案`今天 08:00 · 爸爸`、值`150 ml` — 位置：153–158。
- 列表项4：标题`辅食`、副文案`昨天 18:30 · 奶奶`、值`30 g` — 位置：165–170。
- 浮动按钮：添加（图标，无文案） — 位置：174–177。
- 底部导航：`主页`、`统计`、`我的` — 位置：181–192（主页选中）。

### 新增喂养记录（配方奶，/喂养记录主页_1/code.html）
- 页面标题：`新增喂养记录` — 位置：71。
- 宝宝分段：`宝宝 A`（默认选中）、`宝宝 B` — 位置：78–87（默认：80–82）。
- 分组标题：`喂养类型` — 位置：91。
- 类型按钮：`母乳`、`配方奶`（选中）、`辅食` — 位置：93–104（配方奶选中：97–100）。
- 字段标签：`喂养量` — 位置：108。
- 数值与单位：`150` / `ml` — 位置：110–111。
- 快捷按钮：`-30`、`-10`、`+10`、`+30`、`水滴图标`（无文案） — 位置：113–121。
- 字段标签：`喂养时间` — 位置：124。
- 默认值：`今天 14:30` — 位置：129。
- 字段标签：`喂养时长 (可选)` — 位置：133。
- 占位：`例如: 15 分钟` — 位置：138。
- 底部主按钮：`保存` — 位置：143–147。

### 新增喂养记录（辅食-斤，/喂养记录主页_2/code.html）
- 页面标题：`新增喂养记录` — 位置：76–77。
- 宝宝分段：`宝宝 A`（默认选中）、`宝宝 B` — 位置：82–91（默认：85–87）。
- 分组标题：`喂养类型` — 位置：96。
- 类型按钮：`母乳`、`配方奶`、`辅食`（选中） — 位置：98–110（辅食选中：106–110）。
- 字段标签：`喂养量` — 位置：113。
- 占位与单位：`例如: 0.5` / `斤` — 位置：115–117。
- 字段标签：`喂养时间` — 位置：120。
- 默认值：`今天 14:30` — 位置：125。
- 字段标签：`喂养时长 (可选)` — 位置：129。
- 占位：`例如: 15 分钟` — 位置：134。
- 底部主按钮：`保存` — 位置：139–143。

### 新增喂养记录（母乳-计时，/喂养记录主页_3/code.html）
- 页面标题：`新增喂养记录` — 位置：71。
- 宝宝分段：`宝宝 A`（默认选中）、`宝宝 B` — 位置：78–87（默认：81–82）。
- 分组标题：`喂养类型` — 位置：91。
- 类型按钮：`母乳`（选中）、`配方奶`、`辅食` — 位置：93–104。
- 字段标签：`喂养时长` — 位置：108。
- 输入值与占位：当前值`00:15:23`、占位`00:15:00` — 位置：114。
- 计时控件：播放、停止（图标，无文案） — 位置：116–121。
- 字段标签：`喂养时间` — 位置：125。
- 默认值：`今天 14:30` — 位置：130。
- 字段标签：`喂养量 (可选)` — 位置：134。
- 占位与单位：`例如: 120` / `ml` — 位置：136–137。
- 底部主按钮：`保存` — 位置：143–145。

### 数据统计页（/数据统计页/code.html）
- 顶部标题：`统计` — 位置：53。
- 时间范围分段：`日`（默认选中）、`周` — 位置：57–67（默认：60–62）。
- 日期导航：`今天, 5月24日` — 位置：73–74。
- 图例标签：`宝宝A`、`宝宝B` — 位置：79–86。
- 指标卡（上方）：`宝宝A 总量 / 850ml` — 位置：89–92；`宝宝B 总量 / 820ml` — 位置：93–96。
- 指标卡（下方）：`宝宝A 频率 / 8次` — 位置：99–102；`宝宝B 频率 / 9次` — 位置：103–106。
- 区块标题：`喂养量趋势` — 位置：110。
- x轴刻度：`00, 03, 06, 09, 12, 15, 18, 21` — 位置：117,124,131,138,145,152,159,166。
- 统计说明：`只统计奶粉和母乳，母乳按照奶粉的平均值计算。` — 位置：169–170。
- 底部导航：`主页`、`统计`（选中）、`我的` — 位置：175–186。

### 设置（我的）（/设置页面_3/code.html）
- 顶部标题：`设置` — 位置：63。
- 分组标题：`账户与模式` — 位置：66–68。
- 列表项：`账户设置` — 位置：70–78。
- 列表项：`宝宝档案` — 位置：81–89。
- 列表项：`家庭模式` — 位置：92–100。
- 列表项：`双胎模式`（开关） — 位置：103–114。
- 分组标题：`通用` — 位置：118–120。
- 列表项：`喂养提醒` — 位置：121–130。
- 底部导航：`主页`、`统计`、`我的`（选中） — 位置：136–151。

### 宝宝档案管理（/设置页面_1/code.html）
- 顶部标题：`宝宝档案` — 位置：57。
- 顶部添加按钮：`添加`（图标） — 位置：58–60。
- 档案卡1：标题`大宝`、性别图标`male`、出生日期`2023年10月26日`、右侧`编辑`图标 — 位置：68–79。
- 档案卡2：标题`二宝`、性别图标`female`、出生日期`2023年10月26日`、右侧`编辑`图标 — 位置：87–97。

### 添加新宝宝（/设置页面_2/code.html）
- 顶部标题：`添加新宝宝` — 位置：55。
- 字段标签/占位：`姓名` / `请输入宝宝姓名` — 位置：69–71。
- 字段标签/默认值：`出生日期` / `2023-10-26` — 位置：73–75。
- 性别选项按钮：`男孩`、`女孩` — 位置：80–87（默认按钮样式为男孩高亮）。
- 底部主按钮：`保存` — 位置：94–95。

### 家庭模式设置（/家庭模式设置/code.html）
- 顶部标题：`家庭模式设置` — 位置：46。
- 顶部操作：`保存` — 位置：56–57。
- 成员项1：`爸爸 (我)` / `管理员` — 位置：58–60。
- 成员项2：`妈妈` / `管理员` — 位置：72–74。
- 成员项3：`奶奶` / `家庭成员` — 位置：86–88。
- 邀请按钮：`邀请新成员` — 位置：96–99。
- 说明文案：`邀请家人共同记录宝宝的成长点滴` — 位置：103。

### 喂养提醒设置（/喂养提醒设置/code.html）
- 顶部标题：`喂养提醒设置` — 位置：55。
- 顶部操作：`保存` — 位置：56–57。
- 总开关标签：`启用喂养提醒`（开关默认开启） — 位置：66–73。
- 分段选择：`宝宝A`、`宝宝B`、`统一设置`（默认选中统一设置） — 位置：77–91。
- 配置项：`提醒间隔` / `3小时 0分钟` — 位置：101–106。
- 配置项：`提醒方式` / `震动和铃声` — 位置：114–119。
- 配置项：`铃声选择` / `默认` — 位置：127–132。

### 账户设置（/账户设置/code.html）
- 顶部标题：`账户设置` — 位置：58。
- 列表项：`更换头像` — 位置：64–74。
- 列表项：`查看账号` / `mengmengd....` — 位置：77–85。
- 底部主按钮：`退出登录` — 位置：90–91。

## 统计口径与算法（原型说明口径）
- 总量：配方奶 `ml` 直接累加，母乳按奶粉的平均值折算为 `ml`（统计页说明）。
- 频率：记录次数；可在未来提供是否包含辅食的开关。
- 趋势：按小时聚合，两名宝宝分别以蓝/绿柱表示。
- 单位换算：新增辅食以`斤`录入（/喂养记录主页_2），主页展示为`g`；系统需采用 1斤=500g 换算统一统计单位。

## 校验规则与交互细节（结合原型默认/占位）
- 配方奶：必填 `喂养量(ml)` 与 `喂养时间`；量需为正数，建议范围 `10–300ml`；提供快捷增减按钮。
- 辅食：必填 `喂养量(斤)` 与 `喂养时间`；支持小数输入（inputmode=decimal）。
- 母乳：必填 `喂养时长` 与 `喂养时间`；`喂养量(ml)`可选；提供播放/停止计时控件，时长格式 `HH:MM:SS`。
- 时间默认值：各新增页默认 `今天 HH:MM`（具体值均为 `今天 14:30`）。
- 主页列表项显示记录人（妈妈/爸爸/奶奶）与时间；母乳记录展示侧别（左）。
- 提醒设置：总开关控制提醒有效性；分段 `统一设置` 优先级低于具体宝宝设置（建议规则）。

## 默认状态（从原型推断）
- 登录页默认选中 `登录`。
- 新增记录页默认选中 `宝宝 A`；各类型页默认选中对应类型（配方奶/辅食/母乳）。
- 提醒设置默认选中 `统一设置` 且总开关 `checked`。
- 统计页默认选中 `日` 范围。
- 设置底部导航默认在 `我的`；主页底部导航默认在 `主页`。
- 账户设置中账号以缩略形式展示 `mengmengd....`。

## 边界与异常处理
- 极值限制：`ml > 1000`、`时长 > 3h` 给出提示并阻止保存；`辅食斤 > 10` 给予提示。
- 空状态：主页与统计页无数据时提供引导与占位；提醒关闭时配置不可生效（可灰显）。
- 跨天与时区：以本地时间聚合当天；周视图按自然周或滚动 7 天（需产品明确）。
- 重复记录：同一宝宝在短时间内多次记录提示合并或确认（建议）。

## 埋点建议
- 页面曝光：登录、主页、统计、我的、各设置子页。
- 关键操作：新增记录保存、计时器开始/停止、提醒开关/间隔/方式/铃声更改、宝宝档案保存、邀请成员点击、退出登录点击。
- 指标：新增记录次数、提醒开启率、日活、总量/频率分布、趋势图浏览与日期切换行为。

## 非功能需求
- 暗色模式适配与颜色对比度合规。
- 移动端性能：列表项懒加载与轻量渲染；资源懒加载（头像、铃声）。
- 数据缓存与离线提示；失败重试机制。

## 页面代码引用索引
- 主页：`产品原型/喂养记录主页_4/code.html:70–99, 102–171, 174–193`
- 配方奶新增：`产品原型/喂养记录主页_1/code.html:90–147`
- 辅食新增（斤）：`产品原型/喂养记录主页_2/code.html:96–143`
- 母乳新增（计时）：`产品原型/喂养记录主页_3/code.html:91–146`
- 统计页：`产品原型/数据统计页/code.html:57–170`
- 设置（我的）：`产品原型/设置页面_3/code.html:66–133, 136–151`
- 宝宝档案：`产品原型/设置页面_1/code.html:56–101`
- 添加宝宝：`产品原型/设置页面_2/code.html:51–95`
- 家庭模式：`产品原型/家庭模式设置/code.html:42–104`
- 喂养提醒：`产品原型/喂养提醒设置/code.html:51–134`
- 账户设置：`产品原型/账户设置/code.html:54–91`
- 登录/注册：`产品原型/登录/注册页/code.html:56–97`

